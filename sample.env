# --- Postgres (required for docker/m8flow-docker-compose.yml; m8flow-db needs non-empty POSTGRES_PASSWORD) ---
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=postgres

# --- Flask / Backend ---
FLASK_DEBUG=1
FLASK_ENV=development
FLASK_APP=app.py
# CHANGE this to your own random secret (32+ chars)
FLASK_SESSION_SECRET_KEY=

SPIFFWORKFLOW_BACKEND_ENV=local_development
SPIFFWORKFLOW_BACKEND_LOG_LEVEL=INFO
WATCHFILES_FORCE_POLLING=true

# --- Database (SQLAlchemy URI) ---
SPIFFWORKFLOW_BACKEND_DATABASE_TYPE=postgres
SPIFFWORKFLOW_BACKEND_DATABASE_URI=postgresql://postgres:postgres@<LOCAL_IP>:1111/postgres
SPIFFWORKFLOW_BACKEND_UPGRADE_DB=true


# --- Ports / URLs (replace <LOCAL_IP> with your machine IP) ---
SPIFFWORKFLOW_BACKEND_PORT=8000
SPIFFWORKFLOW_BACKEND_URL=http://<LOCAL_IP>:8000
SPIFFWORKFLOW_BACKEND_URL_FOR_FRONTEND=http://<LOCAL_IP>:8001
# CORS: list frontend origins as host:port; include the port your frontend runs on (e.g. 8001 for Docker, 7001 for local).
SPIFFWORKFLOW_BACKEND_CORS_ALLOW_ORIGINS=localhost:8001,localhost:7001,localhost:5173,127.0.0.1:8001

# --- Models path inside container ---
SPIFFWORKFLOW_BACKEND_BPMN_SPEC_ABSOLUTE_DIR=/app/process_models

# --- Auth (OIDC / Keycloak) ---
SPIFFWORKFLOW_BACKEND_OPEN_ID_SERVER_URL=http://<LOCAL_IP>:8080/auth/realms/spiffworkflow
SPIFFWORKFLOW_BACKEND_OPEN_ID_CLIENT_ID=spiffworkflow-backend
SPIFFWORKFLOW_BACKEND_OPEN_ID_CLIENT_SECRET_KEY=
SPIFFWORKFLOW_BACKEND_OPEN_ID_IS_AUTHORITY_FOR_USER_GROUPS=true
KEYCLOAK_ENABLE_CLIENT_AUTH=false

# When using SPIFFWORKFLOW_BACKEND_AUTH_CONFIGS (e.g. Keycloak on 7002, realm spiffworkflow-local),
# set client_secret to match the client in Keycloak (see extensions/m8flow-backend/keycloak/realm_exports):
# SPIFFWORKFLOW_BACKEND_AUTH_CONFIGS__0__identifier=default
# SPIFFWORKFLOW_BACKEND_AUTH_CONFIGS__0__uri=http://localhost:7002/realms/spiffworkflow-local
# SPIFFWORKFLOW_BACKEND_AUTH_CONFIGS__0__client_id=spiffworkflow-backend
# SPIFFWORKFLOW_BACKEND_AUTH_CONFIGS__0__client_secret=JXeQExm0JhQPLumgHtIIqf52bDalHz0q

# --- Celery / Redis ---
SPIFFWORKFLOW_BACKEND_CELERY_ENABLED=false
SPIFFWORKFLOW_BACKEND_CELERY_BROKER_URL=redis://<LOCAL_IP>:6379/0
SPIFFWORKFLOW_BACKEND_CELERY_RESULT_BACKEND=redis://<LOCAL_IP>:6379/0
SPIFFWORKFLOW_BACKEND_RUNNING_IN_CELERY_WORKER=false

# --- Frontend ---
SPIFFWORKFLOW_BACKEND_URL_FRONTEND=http://<LOCAL_IP>:8000  
SPIFFWORKFLOW_BACKEND_URL=http://<LOCAL_IP>:8000          

# --- Optional (Connector proxy, tenancy, permissions) ---
SPIFFWORKFLOW_BACKEND_CONNECTOR_PROXY_URL=http://<LOCAL_IP>:8004
SPIFFWORKFLOW_BACKEND_PERMISSIONS_FILE_NAME=example.yml
M8FLOW_DEFAULT_TENANT_ID=default
M8FLOW_ALLOW_MISSING_TENANT_CONTEXT=false

# --- Extensions frontend: multitenant mode (tenant selection page as default) ---
# When true, extensions/frontend shows tenant selection at / and validates tenant via GET /tenants/check before login.
# The extensions frontend start script passes MULTI_TENANT_ON to Vite; set when running extensions frontend (e.g. MULTI_TENANT_ON=true npm start).
MULTI_TENANT_ON=false

# --- SQLAlchemy Logs---
M8FLOW_SQLALCHEMY_ECHO=false
